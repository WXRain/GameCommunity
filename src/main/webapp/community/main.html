<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>论坛主页</title>
<script type="text/javascript" src="../script/jquery.min.js"></script>
<script type="text/javascript" src="../script/jquerySession.js"></script>
<script type="text/javascript" src="../script/getRootPath.js"></script>
<script type="text/javascript">
	var path = getRootPath(); 
</script>
</head>
<body>
<div><iframe align="center" width="100%" height="100" src="../top.html" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></div>
<center><h2 id="title">论坛主界面</h2></center><br/><br/><br/>
<table width="100%" id="table">
	<tr>
	    <td width="25%">主题</td>
	    <td width="50%">介绍</td>
	    <td width="25%">创建时间</td>
	</tr>
	<tr>
	    <td colspan="3"><hr/></td>
	</tr>
</table>
<script type="text/javascript">
$(function(){
	$.ajax({
		url: "initMain.do",
		method: "POST",
		dataType: "JSON",
		data: "",
		success: function(result){
			console.log(result);
			if(result.state == 0){
				createTable(result.data);
			}else{
				alert(result.message);
			}
		}
	});
});

function createTable(data){
	if(data == null || data.length <= 0){
		   $("#table").append("<tr><td colspan='3'><center>该板块无内容</center></td></tr>");
	}else{
		for(var i = 0; i < data.length; i++){
			$("table").append("<tr><td><a href=javascript:void() onclick=clickGameType(" + data[i].id + ")>" + data[i].typeName + "</a></td>" +
			  "<td>" + data[i].introduce + "</td>" + 
			  "<td>" + data[i].createTimeString + 
			  "</td></tr><tr><td colspan='3'><hr/></td></tr>");
		}
	}
	
}

function clickGameType(gameTypeId){
	window.location.href = path + "/community/gameType.html?gameTypeId=" + gameTypeId;
}

</script>
</body>
</html>